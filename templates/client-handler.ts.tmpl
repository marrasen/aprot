// Code generated by aprot. DO NOT EDIT.
// Handler: {{.StructName}}

import { ApiClient, RequestOptions, PushHandler } from './client';

{{range .Interfaces -}}
export interface {{.Name}} {
{{- range .Fields}}
    {{.Name}}{{if .Optional}}?{{end}}: {{.Type}};
{{- end}}
}

{{end -}}
// Extend ApiClient with {{.StructName}} methods
declare module './client' {
    interface ApiClient {
{{- range .Methods}}
        {{.MethodName}}(req: {{.RequestType}}, options?: RequestOptions): Promise<{{.ResponseType}}>;
{{- end}}
{{- range .PushEvents}}
        {{.HandlerName}}(handler: PushHandler<{{.DataType}}>): () => void;
{{- end}}
    }
}

{{range .Methods -}}
ApiClient.prototype.{{.MethodName}} = function(req: {{.RequestType}}, options?: RequestOptions): Promise<{{.ResponseType}}> {
    return this.request<{{.ResponseType}}>('{{.Name}}', req, options);
};

{{end -}}
{{range .PushEvents -}}
ApiClient.prototype.{{.HandlerName}} = function(handler: PushHandler<{{.DataType}}>): () => void {
    return this.onPush<{{.DataType}}>('{{.Name}}', handler);
};

{{end -}}
