// Code generated by aprot. DO NOT EDIT.
// Handler: {{.StructName}}

import { ApiClient } from './client';
import type { RequestOptions, PushHandler } from './client';

{{range .Enums -}}
export const {{.Name}} = {
{{- range .Values}}
    {{.Name}}: {{.Value}},
{{- end}}
} as const;
export type {{.Name}}Type = typeof {{.Name}}[keyof typeof {{.Name}}];

{{end -}}
{{range .Interfaces -}}
export interface {{.Name}} {
{{- range .Fields}}
    {{.Name}}{{if .Optional}}?{{end}}: {{.Type}};
{{- end}}
}

{{end -}}
// Extend ApiClient with {{.StructName}} methods
declare module './client' {
    interface ApiClient {
{{- range .Methods}}
{{- if .NoRequest}}
        {{.MethodName}}(options?: RequestOptions): Promise<{{.ResponseType}}>;
{{- else}}
        {{.MethodName}}(req: {{.RequestType}}, options?: RequestOptions): Promise<{{.ResponseType}}>;
{{- end}}
{{- end}}
{{- range .PushEvents}}
        {{.HandlerName}}(handler: PushHandler<{{.DataType}}>): () => void;
{{- end}}
    }
}

{{range .Methods -}}
{{- if .NoRequest}}
ApiClient.prototype.{{.MethodName}} = function(options?: RequestOptions): Promise<{{.ResponseType}}> {
    return this.request<{{.ResponseType}}>('{{.Name}}', {}, options);
};
{{- else}}
ApiClient.prototype.{{.MethodName}} = function(req: {{.RequestType}}, options?: RequestOptions): Promise<{{.ResponseType}}> {
    return this.request<{{.ResponseType}}>('{{.Name}}', req, options);
};
{{- end}}

{{end -}}
{{range .PushEvents -}}
ApiClient.prototype.{{.HandlerName}} = function(handler: PushHandler<{{.DataType}}>): () => void {
    return this.onPush<{{.DataType}}>('{{.Name}}', handler);
};

{{end -}}
